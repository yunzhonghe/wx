<#include "../base/layout.html"/>
<@layout>
	<link rel="stylesheet" type="text/css" href="${base}/resources/plugins/select2/select2_metro.css" />
	<link rel="stylesheet" type="text/css" href="${base}/resources/plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.css" />
	<link rel="stylesheet" type="text/css" href="${base}/resources/plugins/bootstrap-markdown/css/bootstrap-markdown.min.css">
<!-- BEGIN CONTAINER -->
<div class="page-container">
    <@nav index=72/>
    <div class="page-content">
        <@title name="添加应答规则" menus='{"应答规则维护":"${base}/wx-answer-rule","添加应答规则":"javascript:;"}'/>
    	<div class="row">
				<div class="col-md-12">
					<!-- BEGIN VALIDATION STATES-->
					<div class="portlet box blue">
						<div class="portlet-title">
							<div class="caption"><i class="fa fa-reorder"></i>添加应答规则</div>
						</div>
						<div class="portlet-body form">
							<!-- BEGIN FORM-->
							<form class="form-horizontal" id="form_sample_3" action="${base}/wx-answer-rule/update" novalidate="novalidate" method="post">
                                <input type="hidden" name="wxAnswerRule.id" value="${(wxAnswerRule.id)?default('')}">
								<div class="form-body">
									<div class="form-group">
										<label class="control-label col-md-3">关键字<span class="required">*</span></label>
										<div class="col-md-4">
											<input type="text" class="form-control" data-required="1" name="wxAnswerRule.keyword" value="${(wxAnswerRule.keyword)?default('')}">
										</div>
									</div>
									<div class="form-group">
										<label class="control-label col-md-3">应答类型<span class="required">*</span></label>
										<div class="col-md-4">
											<select id="form_2_select2" class="form-control select2me" name="wxAnswerRule.answer_type">
												<option value="0">文本</option>
                                                <option value="1">素材</option>
											</select>
										</div>
									</div>
                                    <div class="form-group" id="answer_text">
                                        <label class="control-label col-md-3">应答文本 <span class="required">*</span></label>
                                        <div class="col-md-4">
                                            <input type="text" class="form-control" name="wxAnswerRule.answer" value="${(wxAnswerRule.answer)?default('')}">
                                        </div>
                                    </div>
                                    <div class="form-group" id="answer_material">
                                        <label class="control-label col-md-3">应答素材<span class="required">*</span></label>
                                        <div class="col-md-4">
                                            <select id="form_2_select3" class="form-control select3me" name="wxAnswerRule.material_id">
                                                <#if materialList?has_content>
                                                    <#list materialList as material>
                                                        <option value="${material.id}">${material.describe}</option>
                                                    </#list>
                                                </#if>
                                            </select>
                                        </div>
                                    </div>
								</div>
								<div class="form-actions fluid">
									<div class="col-md-offset-3 col-md-9">
										<button class="btn green" type="submit">提交</button>
										<button class="btn default" type="button" onclick="javascript:window.location.href='${base}/wx-answer-rule/list';">取消</button>
									</div>
								</div>
							</form>
							<!-- END FORM-->
						</div>
						<!-- END VALIDATION STATES-->
					</div>
				</div>
			</div>
    </div>
</div>
<@footer/>
<script type="text/javascript" src="${base}/resources/plugins/jquery-validation/dist/jquery.validate.min.js"></script>
<script type="text/javascript" src="${base}/resources/plugins/jquery-validation/dist/additional-methods.min.js"></script>
<script type="text/javascript" src="${base}/resources/plugins/select2/select2.min.js"></script>
<script type="text/javascript" src="${base}/resources/plugins/bootstrap-wysihtml5/wysihtml5-0.3.0.js"></script> 
<script type="text/javascript" src="${base}/resources/plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.js"></script>
<script type="text/javascript" src="${base}/resources/plugins/bootstrap-markdown/js/bootstrap-markdown.js"></script>
<script type="text/javascript" src="${base}/resources/plugins/bootstrap-markdown/lib/markdown.js"></script>

<script src="${base}/resources/js/wx-admin.js" type="text/javascript"></script>
<script>
    jQuery(document).ready(function() {
        $("#form_2_select2").val("${wxAnswerRule.answer_type}");
        if("${wxAnswerRule.answer_type}" === "0") {
            $("#answer_material").hide();
        } else {
            $("#answer_text").hide();
            $("#form_2_select3").val("${wxAnswerRule.material_id}");
        }

        $("#form_2_select2").change(function() {
            if($("#form_2_select2").val() === "0") {
                $("#answer_material").hide();
                $("#answer_text").show();
            } else {
                $("#answer_material").show();
                $("#answer_text").hide();
            }
        });
        App.init();


    });
</script>
</@layout>